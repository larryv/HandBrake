Index: libvpx-v1.3.0/build/make/configure.sh
===================================================================
--- libvpx-v1.3.0.orig/build/make/configure.sh
+++ libvpx-v1.3.0/build/make/configure.sh
@@ -1065,9 +1065,25 @@ EOF
             gcc*)
                 add_cflags -m${bits}
                 add_ldflags -m${bits}
-                link_with_cc=gcc
                 tune_cflags="-march="
-                setup_gnu_toolchain
+                case ${CC} in
+                    *clang*)
+                        XCRUN_FIND="xcrun --sdk macosx --find"
+                        AR="${AR:-$(${XCRUN_FIND} ar)}"
+                        AS="${AS:-$(${XCRUN_FIND} as)}"
+                        CC="${CC:-$(${XCRUN_FIND} clang)}"
+                        CXX="${CXX:-$(${XCRUN_FIND} clang++)}"
+                        LD="${LD:-$(${XCRUN_FIND} clang)}"
+                        NM="${NM:-$(${XCRUN_FIND} nm)}"
+                        RANLIB="${RANLIB:-$(${XCRUN_FIND} ranlib)}"
+                        STRIP="${STRIP:-$(${XCRUN_FIND} strip)}"
+                        AS_SFX=.s
+                        ;;
+                    *)
+                        link_with_cc=gcc
+                        setup_gnu_toolchain
+                        ;;
+                esac
                 #for 32 bit x86 builds, -O3 did not turn on this flag
                 enabled optimizations && disabled gprof && check_add_cflags -fomit-frame-pointer
             ;;
